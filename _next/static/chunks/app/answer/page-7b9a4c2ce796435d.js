(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[781],{4804:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>c});var l=a(5155),t=a(2115),n=a(5695);async function i(e){try{let s="https://ja.wikipedia.org/w/api.php?action=query&format=json&prop=extracts&exintro=1&explaintext=1"+"&titles=".concat(encodeURIComponent(e))+"&origin=*",a=await fetch(s),l=(await a.json()).query.pages,t=Object.keys(l)[0],n=l[t].extract;if(!n)return{description:null,specialties:null,attractions:null};let i=n.replace(/\n/g," ").split(/[。．]/).filter(e=>e.trim().length>0),r=i.slice(0,2).join("。")+"。",c=["特産","名産","産物","生産","輸出","農産物","海産物"],o=i.find(e=>c.some(s=>e.includes(s)))||null,d=["観光","見どころ","観光地","世界遺産","名所","遺跡","博物館"],u=i.find(e=>d.some(s=>e.includes(s)))||null;return{description:r,specialties:o?o+"。":null,attractions:u?u+"。":null}}catch(e){return console.error("Wikipediaの情報を取得できませんでした:",e),{description:null,specialties:null,attractions:null}}}function r(){let e=(0,n.useRouter)(),s=(0,n.useSearchParams)(),[a,r]=(0,t.useState)(null),[c,o]=(0,t.useState)(null),[d,u]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{let a=s.get("code");if(!a)return void e.push("/quiz");(async()=>{try{let e=await fetch("https://flagcdn.com/ja/codes.json"),s=(await e.json())[a];if(s){r({code:a,name:s});let e=await i(s);o(e)}}catch(e){console.error("データの取得に失敗しました:",e)}finally{u(!1)}})()},[s,e]),d)?(0,l.jsx)("div",{className:"flex flex-col items-center justify-start min-h-[calc(100vh-4rem)] p-4 bg-white",children:(0,l.jsx)("div",{className:"w-full max-w-md bg-orange-100 rounded-lg shadow-lg p-6 space-y-6",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-6"}),(0,l.jsx)("div",{className:"aspect-video bg-gray-200 rounded mb-6"}),(0,l.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})})}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-start min-h-[calc(100vh-4rem)] p-4 bg-white",children:(0,l.jsxs)("div",{className:"w-full max-w-md bg-orange-100 rounded-lg shadow-lg p-6 space-y-6",children:[(0,l.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["答え：",null==a?void 0:a.name]}),(0,l.jsx)("div",{className:"aspect-video relative",children:a&&(0,l.jsx)("img",{src:"https://flagcdn.com/w320/".concat(a.code,".png"),alt:"".concat(a.name,"の国旗"),className:"w-full h-full object-contain"})}),(0,l.jsx)("button",{onClick:()=>e.push("/quiz"),className:"w-full py-3 bg-blue-500 hover:bg-blue-600 text-white rounded-lg transition-colors",children:"次の問題へ"}),(0,l.jsx)("div",{className:"aspect-[4/3] relative",children:a&&(0,l.jsx)("iframe",{src:"https://www.google.com/maps/embed/v1/place?key=".concat("AIzaSyCDuN-OHxYs9DU8Lkixlqzem_9JiuzZE5E","&q=").concat(encodeURIComponent(a.name),"&zoom=3"),className:"w-full h-full rounded-lg",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade"})}),c&&(0,l.jsxs)("div",{className:"space-y-4 text-gray-700",children:[c.description&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold mb-2",children:"基本情報"}),(0,l.jsx)("p",{children:c.description}),a&&(0,l.jsx)("a",{href:"https://ja.wikipedia.org/wiki/".concat(encodeURIComponent(a.name)),target:"_blank",rel:"noopener noreferrer",className:"inline-block mt-2 text-blue-600 hover:text-blue-800 hover:underline",children:"Wikipediaで詳しく見る →"})]}),c.specialties&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold mb-2",children:"特産物"}),(0,l.jsx)("p",{children:c.specialties})]}),c.attractions&&(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"font-semibold mb-2",children:"観光スポット"}),(0,l.jsx)("p",{children:c.attractions})]})]})]})})}function c(){return(0,l.jsx)(t.Suspense,{fallback:(0,l.jsx)("div",{className:"flex flex-col items-center justify-start min-h-[calc(100vh-4rem)] p-4 bg-white",children:(0,l.jsx)("div",{className:"w-full max-w-md bg-orange-100 rounded-lg shadow-lg p-6 space-y-6",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-6"}),(0,l.jsx)("div",{className:"aspect-video bg-gray-200 rounded mb-6"}),(0,l.jsx)("div",{className:"h-10 bg-gray-200 rounded"})]})})}),children:(0,l.jsx)(r,{})})}},5695:(e,s,a)=>{"use strict";var l=a(8999);a.o(l,"useRouter")&&a.d(s,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(s,{useSearchParams:function(){return l.useSearchParams}})},8253:(e,s,a)=>{Promise.resolve().then(a.bind(a,4804))}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(8253)),_N_E=e.O()}]);